<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cytoscape Graph</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.23.0/cytoscape.min.js"></script>
    <style>
      .cy {
        width: 48vw;
        height: 95vh;
        border: 1px solid black;
      }
      #container {
        display: flex;
        flex-direction: row;
        gap: 1vw;
      }
    </style>
  </head>
  <body>
    <div id="container">
      <div id="cy" class="cy"></div>
      <div id="cy2" class="cy"></div>
    </div>
    <script>
      // Example adjacency matrix
      let soundAdjacencyMatrix = [
        [
          0, 86, 828, 297, 6, 4, 132, 73, 99, 94, 4, 4, 0, 23, 17, 32, 2, 4, 0,
          46, 23, 0, 0, 28, 71, 0, 0, 0, 62, 4, 0, 37, 156, 0,
        ],
        [
          86, 0, 189, 201, 0, 0, 55, 2, 40, 4, 0, 0, 0, 0, 0, 0, 0, 33, 0, 0, 0,
          0, 0, 0, 82, 0, 13, 0, 6, 0, 0, 0, 0, 0,
        ],
        [
          828, 189, 0, 681, 0, 0, 0, 145, 157, 43, 7, 7, 14, 54, 0, 65, 92, 7,
          0, 0, 0, 7, 7, 21, 51, 0, 0, 42, 48, 14, 0, 50, 111, 7,
        ],
        [
          297, 201, 681, 0, 0, 26, 124, 115, 153, 142, 8, 0, 25, 0, 0, 16, 114,
          0, 52, 0, 0, 0, 0, 31, 0, 0, 22, 8, 64, 8, 0, 47, 0, 0,
        ],
        [
          6, 0, 0, 0, 0, 5, 0, 2, 0, 122, 8, 0, 0, 0, 0, 0, 32, 0, 0, 5, 3, 0,
          4, 8, 0, 0, 0, 11, 8, 0, 0, 3, 0, 0,
        ],
        [
          4, 0, 0, 26, 5, 0, 0, 34, 0, 27, 44, 5, 0, 0, 0, 5, 34, 0, 0, 185, 15,
          0, 0, 8, 0, 0, 0, 0, 0, 0, 0, 4, 21, 0,
        ],
        [
          132, 55, 0, 124, 0, 0, 0, 7, 0, 8, 21, 0, 0, 4, 0, 0, 0, 0, 0, 0, 59,
          0, 0, 98, 0, 0, 0, 0, 59, 74, 0, 0, 65, 0,
        ],
        [
          73, 2, 145, 115, 2, 34, 7, 0, 70, 67, 5, 2, 32, 7, 66, 5, 0, 2, 29, 3,
          30, 0, 0, 120, 5, 7, 0, 0, 27, 2, 0, 47, 3, 0,
        ],
        [
          99, 40, 157, 153, 0, 0, 0, 70, 0, 89, 0, 0, 15, 0, 31, 3, 28, 0, 27,
          15, 11, 0, 3, 105, 0, 0, 0, 3, 0, 0, 0, 31, 624, 0,
        ],
        [
          94, 4, 43, 142, 122, 27, 8, 67, 89, 0, 4, 4, 8, 0, 24, 0, 82, 0, 0,
          68, 26, 0, 57, 126, 0, 0, 0, 0, 20, 0, 4, 3, 0, 0,
        ],
        [
          4, 0, 7, 8, 8, 44, 21, 5, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16, 3, 0,
          0, 8, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0,
        ],
        [
          4, 0, 7, 0, 0, 5, 0, 2, 0, 4, 0, 0, 0, 0, 14, 0, 0, 0, 0, 0, 0, 0, 0,
          0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 25,
        ],
        [
          0, 0, 14, 25, 0, 0, 0, 32, 15, 8, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 36,
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        ],
        [
          23, 0, 54, 0, 0, 0, 4, 7, 0, 0, 0, 0, 4, 0, 55, 4, 0, 0, 0, 0, 0, 103,
          0, 23, 4, 0, 0, 0, 60, 0, 0, 27, 4, 0,
        ],
        [
          17, 0, 0, 0, 0, 0, 0, 66, 31, 24, 0, 14, 0, 55, 0, 4, 0, 0, 0, 2, 0,
          31, 0, 19, 0, 0, 15, 2, 75, 0, 0, 164, 0, 0,
        ],
        [
          32, 0, 65, 16, 0, 5, 0, 5, 3, 0, 0, 0, 0, 4, 4, 0, 0, 0, 0, 0, 0, 0,
          0, 0, 36, 91, 0, 0, 71, 364, 0, 38, 0, 0,
        ],
        [
          2, 0, 92, 114, 32, 34, 0, 0, 28, 82, 0, 0, 0, 0, 0, 0, 0, 0, 0, 33, 0,
          0, 28, 0, 0, 19, 0, 0, 3, 0, 0, 3, 22, 0,
        ],
        [
          4, 33, 7, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 17, 0, 0,
          0, 12, 0, 0, 0, 0, 0, 0, 1, 21, 0,
        ],
        [
          0, 0, 0, 52, 0, 0, 0, 29, 27, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 0,
          90, 0, 0, 0, 11, 0, 16, 0, 0, 43, 0, 0,
        ],
        [
          46, 0, 0, 0, 5, 185, 0, 3, 15, 68, 16, 0, 0, 0, 2, 0, 33, 0, 0, 0, 3,
          0, 0, 0, 0, 0, 3, 12, 0, 0, 0, 1, 80, 0,
        ],
        [
          23, 0, 0, 0, 3, 15, 59, 30, 11, 26, 3, 0, 0, 0, 0, 0, 0, 17, 45, 3, 0,
          0, 152, 40, 0, 0, 0, 0, 27, 3, 0, 3, 3, 0,
        ],
        [
          0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 103, 31, 0, 0, 0, 0, 0, 0, 0,
          0, 0, 0, 0, 0, 0, 6, 0, 0, 0, 0, 0,
        ],
        [
          0, 0, 7, 0, 4, 0, 0, 0, 3, 57, 0, 0, 0, 0, 0, 0, 28, 0, 90, 0, 152, 0,
          0, 0, 0, 0, 0, 0, 3, 0, 0, 1, 0, 0,
        ],
        [
          28, 0, 21, 31, 8, 8, 98, 120, 105, 126, 8, 0, 0, 23, 19, 0, 0, 0, 0,
          0, 40, 0, 0, 0, 0, 0, 0, 0, 31, 0, 146, 4, 436, 0,
        ],
        [
          71, 82, 51, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 4, 0, 36, 0, 12, 0, 0, 0, 0,
          0, 0, 0, 0, 3, 39, 53, 0, 0, 3, 0, 0,
        ],
        [
          0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 91, 19, 0, 0, 0, 0, 0, 0,
          0, 0, 0, 23, 0, 17, 160, 0, 26, 0, 0,
        ],
        [
          0, 13, 0, 22, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 0, 0, 0, 11, 3, 0, 0,
          0, 0, 3, 23, 0, 10, 0, 0, 0, 3, 0, 0,
        ],
        [
          0, 0, 42, 8, 11, 0, 0, 0, 3, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 12, 0, 0,
          0, 0, 39, 0, 10, 0, 0, 0, 0, 0, 0, 0,
        ],
        [
          62, 6, 48, 64, 8, 0, 59, 27, 0, 20, 0, 3, 0, 60, 75, 71, 3, 0, 16, 0,
          27, 6, 3, 31, 53, 17, 0, 0, 0, 0, 0, 51, 0, 0,
        ],
        [
          4, 0, 14, 8, 0, 0, 74, 2, 0, 0, 0, 0, 0, 0, 0, 364, 0, 0, 0, 0, 3, 0,
          0, 0, 0, 160, 0, 0, 0, 0, 0, 0, 35, 0,
        ],
        [
          0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
          146, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        ],
        [
          37, 0, 50, 47, 3, 4, 0, 47, 31, 3, 1, 0, 0, 27, 164, 38, 3, 1, 43, 1,
          3, 0, 1, 4, 3, 26, 3, 0, 51, 0, 0, 0, 1, 0,
        ],
        [
          156, 0, 111, 0, 0, 21, 65, 3, 624, 0, 0, 0, 0, 4, 0, 0, 22, 21, 0, 80,
          3, 0, 0, 436, 0, 0, 0, 0, 0, 35, 0, 1, 0, 0,
        ],
        [
          0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 25, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        ],
      ];

      let noSoundAdjacencyMatrix = [
        [
          0, 12, 169, 171, 0, 12, 173, 367, 27, 75, 0, 0, 0, 27, 507, 0, 0, 0,
          0, 191, 0, 0, 0, 0, 0, 29, 0, 0, 0, 0, 4, 46, 584, 0,
        ],
        [
          12, 0, 387, 760, 0, 0, 0, 0, 43, 21, 14, 0, 0, 0, 0, 31, 607, 256, 0,
          0, 0, 0, 0, 0, 0, 23, 0, 14, 0, 0, 479, 1195, 0, 0,
        ],
        [
          169, 387, 0, 188, 0, 0, 34, 378, 76, 0, 0, 0, 59, 0, 55, 399, 0, 236,
          0, 0, 0, 0, 0, 0, 484, 0, 0, 0, 444, 0, 930, 1109, 939, 0,
        ],
        [
          171, 760, 188, 0, 0, 0, 25, 0, 504, 360, 0, 12, 175, 0, 11, 0, 968,
          268, 0, 0, 0, 0, 0, 537, 0, 500, 0, 43, 0, 0, 1087, 23, 0, 0,
        ],
        [
          0, 0, 0, 0, 0, 0, 0, 48, 0, 0, 0, 40, 0, 0, 0, 0, 0, 0, 923, 0, 461,
          0, 3084, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        ],
        [
          12, 0, 0, 0, 0, 0, 0, 10, 0, 86, 1485, 22, 0, 0, 15, 0, 71, 0, 15,
          1899, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        ],
        [
          173, 0, 34, 25, 0, 0, 0, 2253, 18, 0, 0, 0, 195, 0, 0, 0, 0, 18, 0, 0,
          13, 0, 38, 0, 36, 47, 0, 0, 0, 0, 0, 14, 143, 0,
        ],
        [
          367, 0, 378, 0, 48, 10, 2253, 0, 379, 51, 0, 576, 614, 0, 399, 32, 10,
          39, 835, 395, 193, 0, 617, 790, 13, 363, 0, 0, 0, 0, 0, 292, 717, 0,
        ],
        [
          27, 43, 76, 504, 0, 0, 18, 379, 0, 655, 0, 475, 61, 0, 223, 64, 86,
          568, 190, 36, 0, 0, 30, 1302, 0, 89, 316, 33, 79, 0, 27, 848, 771, 0,
        ],
        [
          75, 21, 0, 360, 0, 86, 0, 51, 655, 0, 86, 645, 1190, 0, 0, 0, 224, 0,
          27, 0, 0, 0, 132, 210, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        ],
        [
          0, 14, 0, 0, 0, 1485, 0, 0, 0, 86, 0, 0, 0, 0, 13, 0, 646, 0, 0, 125,
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16, 0, 0,
        ],
        [
          0, 0, 0, 12, 40, 22, 0, 576, 475, 645, 0, 0, 0, 0, 46, 0, 17, 0, 231,
          269, 0, 0, 20, 42, 0, 0, 0, 0, 0, 0, 0, 96, 0, 0,
        ],
        [
          0, 0, 59, 175, 0, 0, 195, 614, 61, 1190, 0, 0, 0, 35, 78, 0, 0, 143,
          27, 0, 0, 695, 0, 103, 0, 23, 0, 0, 0, 0, 14, 14, 0, 0,
        ],
        [
          27, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 35, 0, 329, 0, 0, 0, 0, 131, 0,
          0, 0, 0, 0, 0, 171, 326, 0, 3587, 0, 68, 0, 0,
        ],
        [
          507, 0, 55, 11, 0, 15, 0, 399, 223, 0, 13, 46, 78, 329, 0, 603, 0, 49,
          0, 0, 191, 615, 0, 15, 33, 240, 328, 0, 870, 0, 17, 2333, 31, 0,
        ],
        [
          0, 31, 399, 0, 0, 0, 0, 32, 64, 0, 0, 0, 0, 0, 603, 0, 0, 0, 0, 0,
          205, 0, 0, 62, 1836, 194, 0, 56, 2577, 0, 62, 4375, 31, 0,
        ],
        [
          0, 607, 0, 968, 0, 71, 0, 10, 86, 224, 646, 17, 0, 0, 0, 0, 0, 37, 0,
          0, 0, 0, 0, 161, 0, 47, 20, 0, 0, 0, 1735, 32, 0, 0,
        ],
        [
          0, 256, 236, 268, 0, 0, 18, 39, 568, 0, 0, 0, 143, 0, 49, 0, 37, 0, 0,
          0, 0, 0, 0, 68, 0, 507, 319, 175, 0, 0, 37, 62, 0, 0,
        ],
        [
          0, 0, 0, 0, 923, 15, 0, 835, 190, 27, 0, 231, 27, 0, 0, 0, 0, 0, 0,
          371, 1228, 0, 2987, 619, 0, 121, 0, 0, 0, 0, 0, 488, 52, 0,
        ],
        [
          191, 0, 0, 0, 0, 1899, 0, 395, 36, 0, 125, 269, 0, 131, 0, 0, 0, 0,
          371, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 19, 0, 293, 23,
        ],
        [
          0, 0, 0, 0, 461, 0, 13, 193, 0, 0, 0, 0, 0, 0, 191, 205, 0, 0, 1228,
          0, 0, 0, 1586, 40, 56, 0, 0, 0, 1067, 0, 0, 53, 16, 0,
        ],
        [
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 695, 0, 615, 0, 0, 0, 0, 0, 0, 0,
          0, 0, 0, 23, 17, 0, 14, 0, 0, 26, 0, 0,
        ],
        [
          0, 0, 0, 0, 3084, 0, 38, 617, 30, 132, 0, 20, 0, 0, 0, 0, 0, 0, 2987,
          0, 1586, 0, 0, 733, 0, 0, 0, 0, 0, 0, 0, 13, 0, 0,
        ],
        [
          0, 0, 0, 537, 0, 0, 0, 790, 1302, 210, 0, 42, 103, 0, 15, 62, 161, 68,
          619, 0, 40, 0, 733, 0, 0, 680, 0, 0, 0, 0, 24, 53, 0, 0,
        ],
        [
          0, 0, 484, 0, 0, 0, 36, 13, 0, 0, 0, 0, 0, 0, 33, 1836, 0, 0, 0, 0,
          56, 0, 0, 0, 0, 173, 26, 0, 3569, 0, 0, 2005, 179, 0,
        ],
        [
          29, 23, 0, 500, 0, 0, 47, 363, 89, 0, 0, 0, 23, 0, 240, 194, 47, 507,
          121, 0, 0, 23, 0, 680, 173, 0, 0, 0, 306, 0, 5, 819, 0, 0,
        ],
        [
          0, 0, 0, 0, 0, 0, 0, 0, 316, 0, 0, 0, 0, 171, 328, 0, 20, 319, 0, 0,
          0, 17, 0, 0, 26, 0, 0, 641, 144, 3763, 14, 61, 0, 0,
        ],
        [
          0, 14, 0, 43, 0, 0, 0, 0, 33, 0, 0, 0, 0, 326, 0, 56, 0, 175, 0, 0, 0,
          0, 0, 0, 0, 0, 641, 0, 0, 934, 0, 14, 0, 0,
        ],
        [
          0, 0, 444, 0, 0, 0, 0, 0, 79, 0, 0, 0, 0, 0, 870, 2577, 0, 0, 0, 0,
          1067, 14, 0, 0, 3569, 306, 144, 0, 0, 0, 0, 2421, 687, 0,
        ],
        [
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3587, 0, 0, 0, 0, 0, 0, 0, 0,
          0, 0, 0, 0, 3763, 934, 0, 0, 0, 0, 0, 0,
        ],
        [
          4, 479, 930, 1087, 0, 0, 0, 0, 27, 0, 0, 0, 14, 0, 17, 62, 1735, 37,
          0, 19, 0, 0, 0, 24, 0, 5, 14, 0, 0, 0, 0, 13, 0, 0,
        ],
        [
          46, 1195, 1109, 23, 0, 0, 14, 292, 848, 0, 16, 96, 14, 68, 2333, 4375,
          32, 62, 488, 0, 53, 26, 13, 53, 2005, 819, 61, 14, 2421, 0, 13, 0, 84,
          0,
        ],
        [
          584, 0, 939, 0, 0, 0, 143, 717, 771, 0, 0, 0, 0, 0, 31, 31, 0, 0, 52,
          293, 16, 0, 0, 0, 179, 0, 0, 0, 687, 0, 0, 84, 0, 0,
        ],
        [
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 23, 0, 0, 0,
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        ],
      ];

      let allAdjacencyMatrix = [
        [
          0, 160, 968, 455, 0, 16, 283, 424, 86, 164, 0, 0, 0, 43, 506, 0, 0, 0,
          0, 229, 0, 0, 0, 16, 103, 0, 0, 0, 56, 0, 4, 61, 711, 0,
        ],
        [
          160, 0, 533, 914, 0, 0, 0, 0, 51, 23, 14, 0, 0, 0, 0, 31, 582, 280, 0,
          0, 0, 0, 0, 0, 36, 21, 0, 0, 0, 0, 453, 1143, 0, 0,
        ],
        [
          968, 533, 0, 844, 0, 0, 34, 460, 403, 0, 0, 0, 62, 39, 55, 416, 145,
          220, 0, 0, 0, 0, 0, 0, 475, 0, 0, 0, 424, 0, 864, 971, 956, 0,
        ],
        [
          455, 914, 844, 0, 0, 0, 199, 27, 622, 473, 0, 0, 191, 0, 0, 0, 1011,
          253, 0, 0, 0, 0, 0, 526, 0, 480, 0, 50, 19, 0, 1023, 30, 0, 0,
        ],
        [
          0, 0, 0, 0, 0, 0, 0, 48, 0, 155, 0, 40, 0, 0, 0, 0, 0, 0, 882, 0, 444,
          0, 2966, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        ],
        [
          16, 0, 0, 0, 0, 0, 0, 18, 0, 47, 1490, 25, 0, 0, 15, 0, 103, 0, 12,
          2012, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        ],
        [
          283, 0, 34, 199, 0, 0, 0, 2040, 21, 0, 0, 0, 174, 0, 0, 0, 0, 0, 0, 0,
          21, 0, 38, 0, 42, 50, 0, 0, 17, 0, 0, 15, 194, 0,
        ],
        [
          424, 0, 460, 27, 48, 18, 2040, 0, 437, 234, 0, 570, 638, 0, 456, 37,
          10, 40, 844, 394, 216, 0, 592, 855, 18, 375, 0, 0, 0, 0, 0, 331, 716,
          0,
        ],
        [
          86, 51, 403, 622, 0, 0, 21, 437, 0, 707, 0, 464, 65, 0, 248, 65, 92,
          553, 212, 42, 0, 0, 33, 1333, 0, 86, 310, 36, 83, 0, 27, 853, 1357, 0,
        ],
        [
          164, 23, 0, 473, 155, 47, 0, 234, 707, 0, 90, 619, 1160, 0, 0, 0, 295,
          0, 0, 119, 0, 0, 184, 320, 0, 0, 0, 0, 0, 0, 12, 0, 0, 0,
        ],
        [
          0, 14, 0, 0, 0, 1490, 0, 0, 0, 90, 0, 0, 0, 0, 0, 0, 631, 0, 0, 139,
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16, 0, 0,
        ],
        [
          0, 0, 0, 0, 40, 25, 0, 570, 464, 619, 0, 0, 0, 0, 53, 0, 17, 0, 228,
          262, 0, 0, 20, 42, 0, 0, 0, 0, 0, 0, 0, 94, 0, 0,
        ],
        [
          0, 0, 62, 191, 0, 0, 174, 638, 65, 1160, 0, 0, 0, 39, 77, 0, 0, 79,
          27, 0, 0, 702, 0, 98, 0, 24, 0, 0, 0, 0, 14, 15, 0, 0,
        ],
        [
          43, 0, 39, 0, 0, 0, 0, 0, 0, 0, 0, 0, 39, 0, 378, 0, 0, 0, 0, 127, 0,
          35, 0, 0, 0, 0, 169, 320, 0, 3405, 0, 73, 0, 0,
        ],
        [
          506, 0, 55, 0, 0, 15, 0, 456, 248, 0, 0, 53, 77, 378, 0, 609, 0, 48,
          48, 0, 86, 617, 0, 20, 33, 232, 340, 20, 920, 0, 18, 2448, 31, 0,
        ],
        [
          0, 31, 416, 0, 0, 0, 0, 37, 65, 0, 0, 0, 0, 0, 609, 0, 0, 0, 0, 0,
          200, 0, 0, 62, 1828, 282, 0, 0, 2583, 468, 62, 4331, 31, 0,
        ],
        [
          0, 582, 145, 1011, 0, 103, 0, 10, 92, 295, 631, 17, 0, 0, 0, 0, 0, 37,
          0, 0, 0, 0, 0, 152, 0, 167, 20, 0, 0, 0, 1642, 35, 0, 0,
        ],
        [
          0, 280, 220, 253, 0, 0, 0, 40, 553, 0, 0, 0, 79, 0, 48, 0, 37, 0, 0,
          0, 0, 0, 0, 67, 0, 498, 314, 172, 0, 0, 37, 62, 0, 0,
        ],
        [
          0, 0, 0, 0, 882, 12, 0, 844, 212, 0, 0, 228, 27, 0, 48, 0, 0, 0, 0,
          360, 1243, 0, 2994, 590, 0, 54, 0, 0, 0, 0, 0, 521, 52, 0,
        ],
        [
          229, 0, 0, 0, 0, 2012, 0, 394, 42, 119, 139, 262, 0, 127, 0, 0, 0, 0,
          360, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 18, 0, 360, 23,
        ],
        [
          0, 0, 0, 0, 444, 0, 21, 216, 0, 0, 0, 0, 0, 0, 86, 200, 0, 0, 1243, 0,
          0, 0, 1691, 49, 56, 0, 0, 0, 1052, 0, 0, 55, 18, 0,
        ],
        [
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 702, 35, 617, 0, 0, 0, 0, 0, 0, 0,
          0, 0, 0, 24, 17, 0, 19, 0, 0, 26, 0, 0,
        ],
        [
          0, 0, 0, 0, 2966, 0, 38, 592, 33, 184, 0, 20, 0, 0, 0, 0, 0, 0, 2994,
          0, 1691, 0, 0, 695, 0, 0, 0, 0, 0, 0, 0, 15, 0, 0,
        ],
        [
          16, 0, 0, 526, 0, 0, 0, 855, 1333, 320, 0, 42, 98, 0, 20, 62, 152, 67,
          590, 0, 49, 0, 695, 0, 0, 640, 0, 0, 0, 0, 38, 57, 436, 0,
        ],
        [
          103, 36, 475, 0, 0, 0, 42, 18, 0, 0, 0, 0, 0, 0, 33, 1828, 0, 0, 0, 0,
          56, 0, 0, 0, 0, 179, 29, 0, 3505, 0, 0, 1963, 171, 0,
        ],
        [
          0, 21, 0, 480, 0, 0, 50, 375, 86, 0, 0, 0, 24, 0, 232, 282, 167, 498,
          54, 0, 0, 24, 0, 640, 179, 0, 0, 0, 321, 0, 6, 829, 0, 0,
        ],
        [
          0, 0, 0, 0, 0, 0, 0, 0, 310, 0, 0, 0, 0, 169, 340, 0, 20, 314, 0, 0,
          0, 17, 0, 0, 29, 0, 0, 641, 70, 3573, 14, 62, 0, 0,
        ],
        [
          0, 0, 0, 50, 0, 0, 0, 0, 36, 0, 0, 0, 0, 320, 20, 0, 0, 172, 0, 0, 0,
          0, 0, 0, 0, 0, 641, 0, 0, 890, 0, 15, 0, 0,
        ],
        [
          56, 0, 424, 19, 0, 0, 17, 0, 83, 0, 0, 0, 0, 0, 920, 2583, 0, 0, 0, 0,
          1052, 19, 0, 0, 3505, 321, 70, 0, 0, 0, 0, 2390, 654, 0,
        ],
        [
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3405, 0, 468, 0, 0, 0, 0, 0, 0,
          0, 0, 0, 0, 3573, 890, 0, 0, 0, 0, 0, 0,
        ],
        [
          4, 453, 864, 1023, 0, 0, 0, 0, 27, 12, 0, 0, 14, 0, 18, 62, 1642, 37,
          0, 18, 0, 0, 0, 38, 0, 6, 14, 0, 0, 0, 0, 13, 0, 0,
        ],
        [
          61, 1143, 971, 30, 0, 0, 15, 331, 853, 0, 16, 94, 15, 73, 2448, 4331,
          35, 62, 521, 0, 55, 26, 15, 57, 1963, 829, 62, 15, 2390, 0, 13, 0, 83,
          0,
        ],
        [
          711, 0, 956, 0, 0, 0, 194, 716, 1357, 0, 0, 0, 0, 0, 31, 31, 0, 0, 52,
          360, 18, 0, 0, 436, 171, 0, 0, 0, 654, 0, 0, 83, 0, 0,
        ],
        [
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 23, 0, 0, 0,
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        ],
      ];

      adjacencyMatrix = noSoundAdjacencyMatrix;

      //   process

      let maxWeight = Math.max(...adjacencyMatrix.flat());
      let threshold = 0.13 * maxWeight; // works well for visual id
      // let threshold = 0.08 * maxWeight; // works well for sound
      // let threshold = 0 * maxWeight;

      adjacencyMatrix = adjacencyMatrix.map((row) =>
        row.map((value) => (value < threshold ? 0 : value))
      );

      // Labels for nodes
      let labels = [
        "Northern Cardinal",
        "Carolina Chickadee",
        "Carolina Wren",
        "Tufted Titmouse",
        "American Crow",
        "Red-bellied Woodpecker",
        "Eastern Towhee",
        "American Robin",
        "Northern Mockingbird",
        "Blue Jay",
        "Downy Woodpecker",
        "Mourning Dove",
        "Eastern Bluebird",
        "American Goldfinch",
        "House Finch",
        "Chipping Sparrow",
        "White-breasted Nuthatch",
        "Eastern Phoebe",
        "European Starling",
        "Northern Flicker",
        "Red-winged Blackbird",
        "Indigo Bunting",
        "Common Grackle",
        "Gray Catbird",
        "White-throated Sparrow",
        "Dark-eyed Junco",
        "Yellow-rumped Warbler",
        "Ruby-crowned Kinglet",
        "Song Sparrow",
        "Pine Warbler",
        "Brown-headed Nuthatch",
        "House Sparrow",
        "Brown Thrasher",
        "Barred Owl",
      ];

      labels = labels.map((s) => s.replaceAll(" ", "\n"));
      console.log(labels);

      // Convert adjacency matrix to Cytoscape elements
      let elements = [];

      // Create nodes
      labels.forEach((label, i) => {
        elements.push({
          data: { id: `n${i}`, label: label },
        });
      });

      // Create edges with opacity based on weight
      for (let i = 0; i < adjacencyMatrix.length; i++) {
        for (let j = i + 1; j < adjacencyMatrix[i].length; j++) {
          let weight = adjacencyMatrix[i][j];
          if (weight > 0) {
            elements.push({
              data: {
                id: `e${i}${j}`,
                source: `n${i}`,
                target: `n${j}`,
                weight: weight,
              },
            });
          }
        }
      }

      // Initialize Cytoscape
      let cyOrig = cytoscape({
        container: document.getElementById("cy"),
        elements: elements,
        style: [
          {
            selector: "node",
            style: {
              label: "data(label)",
              "background-color": "#ccf",
              // "background-color": "data(backgroundColor)",
              "text-valign": "center",
              color: "black",
              "font-size": "10px",
              "text-wrap": "wrap", // Enable text wrapping
              "text-max-width": "80px", // Set max width for wrapping
            },
          },
          {
            selector: "edge",
            style: {
              width: 3,
              "line-color": "#888",
              width: `mapData(weight, ${threshold}, ${maxWeight}, 1, 20)`,
              curveStyle: "bezier",
            },
          },
        ],
        layout: {
          name: "cose", // Force-directed layout
        },
      });

      function renderElements(eles) {
        let elementsWithPositions = eles.map((ele) => {
          return {
            data: ele.data(),
            position: ele.isNode() ? { ...ele.position() } : undefined,
          };
        });
        let cy = cytoscape({
          container: document.getElementById("cy2"),
          elements: elementsWithPositions,
          style: cyOrig.style().json(),
          layout: { name: "preset" },
        });
        return cy;
      }

      let cy, eles, comps, minCut, mkv, mkvEles;
      cyOrig.on("layoutstop", () => {
        cy = renderElements(cyOrig.elements());
        eles = cy.elements();
        comps = eles.components();
        minCut = comps[0].kargerStein();

        mkv = eles.markovClustering({
          attributes: [(edge) => edge.data("weight")],
        });
        makeGroups(cy);
      });

      function makeGroups(cy) {
        const maxGroupSize = 4;
        const sortedEdges = cy
          .edges()
          .sort((a, b) => b.data("weight") - a.data("weight"));

        let c = cy.collection(cy.nodes());

        // add edges to connect up the nodes, largest weight to smallest
        for (let e of sortedEdges) {
          c = c.union(e);
          // check if adding that caused a group to be too big, if so don't add it
          for (let comp of c.components()) {
            if (comp.nodes().length > maxGroupSize) {
              c = c.difference(e);
              break;
            }
          }
        }
        // assign colors to groups
        const groups = c.components();
        for (let i = 0; i < groups.length; i++) {
          console.log(groups[i]);
          const color = randomColor();
          groups[i].forEach((ele) => {
            if (ele.isNode()) {
              console.log(ele);
              ele.style({ "background-color": color });
            }
          });
        }
      }

      function randomColor() {
        return `rgb(${randomColorChannelValue()},${randomColorChannelValue()},${randomColorChannelValue()})`;
      }
      function randomColorChannelValue() {
        return 128 + Math.floor(Math.random() * 128);
      }
    </script>
  </body>
</html>
